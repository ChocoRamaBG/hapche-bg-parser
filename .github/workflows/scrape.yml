name: Run Scraper üöÄ

on:
  workflow_dispatch: # –†—ä—á–Ω–æ –ø—É—Å–∫–∞–Ω–µ
  # schedule:       # –ê–∫–æ –∏—Å–∫–∞—à –¥–∞ —Å–µ –ø—É—Å–∫–∞ —Å–∞–º –Ω–∞ –≤—Å–µ–∫–∏ 6 —á–∞—Å–∞
  #   - cron: '0 */6 * * *' 

jobs:
  scrape-job:
    runs-on: ubuntu-latest
    
    # ‚ö†Ô∏è –í–ê–ñ–ù–û: –î–∞–≤–∞–º–µ –ø—Ä–∞–≤–∞ –Ω–∞ —Å–∫—Ä–∏–ø—Ç–∞ –¥–∞ –ø–∏—à–µ –≤ —Ä–µ–ø–æ—Ç–æ!
    permissions:
      contents: write
    
    steps:
      - name: Checkout repo
        uses: actions/checkout@v3

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'

      - name: Install dependencies
        run: |
          pip install webdriver-manager pandas selenium openpyxl

      - name: Run Scraper Script (Grind Mode)
        run: python main.py

      # üíæ –ö–ê–ß–í–ê–ú–ï EXCEL-A –ö–ê–¢–û ARTIFACT
      # –í—Å–µ–∫–∏ –ø—ä—Ç —â–µ –∏–º–∞—à –Ω–æ–≤ —Ñ–∞–π–ª (Part 1, Part 2...), –ø–æ—Å–ª–µ —Å–∏ –≥–∏ —Å—ä–±–µ—Ä–∏.
      - name: Upload Excel Artifact
        uses: actions/upload-artifact@v4
        if: always()
        with:
          name: Hapche-Data-Part-${{ github.run_id }}
          path: scraped_data/*.xlsx

      # üß† –ó–ê–ü–ê–ó–í–ê–ú–ï –ü–†–û–ì–†–ï–°–ê –í –†–ï–ü–û–¢–û (COMMIT BACK)
      # –¢–æ–≤–∞ —â–µ update-–Ω–µ —Ñ–∞–π–ª–∞ last_page.txt –≤ —Å–∞–º–æ—Ç–æ GitHub —Ä–µ–ø–æ.
      - name: Commit Progress (Auto-Save)
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          commit_message: "ü§ñ Save Game: Updated scraper progress [skip ci]"
          file_pattern: "last_page.txt"
